<app-navbar-patient></app-navbar-patient>

<div class="container top">
	<div class="row">
		<div class="col">
			<mat-card>
				<button mat-raised-button class="previous-button" (click)="back()">Back to My Plans</button>
				<h1>Assessment Test</h1>
				<hr>
				<!-- Row 1-->
				<div class="row">
					<div class="col-6 form-container">
						<mat-form-field>
							<input matInput placeholder="Name" [(ngModel)]="assessmentTest.name" name="assessmentTest.name" readonly>
						</mat-form-field>
					</div>
					<div class="col-6 form-container">
						<mat-form-field>
							<input matInput placeholder="Author" [(ngModel)]="assessmentTest.authorName" name="assessmentTest.authorName" readonly>
						</mat-form-field>
					</div>
				</div>
				<!-- Row 2 -->
				<div class="row">
					<div class="col-12 form-container">
						<mat-form-field>
							<input matInput placeholder="Description" [(ngModel)]="assessmentTest.description" name="assessmentTest.description" readonly>
						</mat-form-field>
					</div>
				</div>
				<!-- Row 3 -->
				<div class="row">
					<div class="col-12 form-container">
						<form (ngSubmit)="submit()" #assessmentTestForm="ngForm">
							<mat-list>
								<mat-divider></mat-divider>
								<div *ngFor="let question of questions; let i = index" [attr.data-index]="i">
									<mat-list-item>
									<b> Question  {{ i+1 }} :	{{ question.questionText }} </b>
									</mat-list-item>
									<!-- Dislay the corresponding answer input field -->
									<div *ngIf="question.questionType == 'Short Answer'" class="form-container">
										<mat-form-field>
											<input matInput placeholder="Answer" [(ngModel)]="answers[i]" name="answers[i]" required>
										</mat-form-field>
									</div>
										<div *ngIf="question.questionType == 'Multiple Choice'" class="form-container">
											<mat-form-field>
												<mat-select [(ngModel)]="answers[i]" name="answers[i]" required>
													<mat-option *ngFor="let choice of question.answerChoices; let n = index" [attr.data-index]="i" [value]="question.answerChoices[n]">
														{{ question.answerChoices[n] }}
													</mat-option>
												</mat-select>
											</mat-form-field>
										</div>
										<div *ngIf="question.questionType == 'Range'" class="form-container">
											<mat-form-field>
												<input matInput placeholder="Answer" type="number" required>
											</mat-form-field>
										</div>
									<mat-divider></mat-divider>
								</div>
							</mat-list>
							<!-- Submit Button -->
							<div class="button-container">
								<button mat-raised-button class="next-button" type="submit" [disabled]="!assessmentTestForm.form.valid">Submit</button>
							</div>
						</form>
					</div>
				</div>
			</mat-card>
		</div>
	</div>
</div>
